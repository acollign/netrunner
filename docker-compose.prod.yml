services:

  endpoint:
    image: nginx:alpine
    ports:
      - 8000:8000
    volumes:
      - ./local/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./resources/public/:/usr/share/netrunner
    depends_on:
      - server
    links:
      - server

  server:
    image: openjdk:11
    command: java -jar /netrunner-standalone.jar
    ports:
      - 2042:1042
    volumes:
      - "./target/netrunner-standalone.jar:/netrunner-standalone.jar"
    depends_on:
      - database
    links:
      - database:mongo

  database:
    image: mongo
    container_name: mongodb
    restart: unless-stopped
    ports:
      - 27017-27019:27017-27019
    volumes:
      - ./data/db:/data/db
